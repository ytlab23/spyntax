<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>SPYNTAX</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<style>
@import url('https://fonts.googleapis.com/css?family=Special+Elite');

html, body {
	height: 100%;
	margin: 0;
}

body {
  padding-top: 40px;
	font-family: 'Special Elite', cursive;
	background: #fffdf5;
	color: #3f3f5a;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
}

blockquote {
	font-weight: 100;
	font-size: 2rem;
	max-width: 600px;
	line-height: 1.4;
	position: relative;
	margin: 0;
	padding: .5rem;
}

#o:before,
#o:after {
	position: absolute;
	color: #f1efe6;
	font-size: 8rem;
	width: 4rem;
	height: 4rem;
}

#o:before {
	content: '“';
	left: -5rem;
	top: -2rem;
}

 #o:after {
	content: '”';
	right: -5rem;
	bottom: 1rem;
}
#copy-btn:hover{
     cursor:pointer;
}
 #pop-up {
    display: block;
    position: absolute;
    opacity:0%;
    width: 50%;
    transform: translate(-90%, -90%);
    transition: opacity font-size 1000ms ease;
    border-radius: 5px;
    font-size: 16px;
    font-weight: bold;
  }

  @media screen and (max-width: 800px) {
  #pop-up {
    width: 60%;
  }
  blockquote {
  font-weight: 100;
  font-size: 1.3rem;
}
#o:before,
#o:after {
  position: absolute;
  color: #f1efe6;
  font-size: 2rem;
  width: 4rem;
  height: 4rem;
}

}
cite {
	line-height: 3;
	text-align: left;
}
</style>
</head>
<body >


<div id="text">
<section class="wrapper">

  {%if text%}
 <blockquote id="content" ><div id="o">{{text}}</div><i id="copy-btn" class="fa fa-copy" style="padding-left: 90%;color: #767d9f;"> <div id="pop-up">Copied!!</div></i></blockquote>
  {%else%}
	<blockquote id="content" >lorem ipsum dolor sit, amet consectetur adipisicing elit. Ullam eveniet dicta laborum ut necessitatibus. Pariatur, illum. Consequatur porro nemo voluptatum similique nam, perspiciatis velit accusamus exercitationem optio necessitatibus libero odio?
	<i id="copy-btn" class="fa fa-copy"></blockquote>
  {%endif%}
</section>
</div>
<script>
  const copyBtn = document.querySelector('#copy-btn');
  const content = document.querySelector('#content');
   const leyuskc = document.querySelector('#pop-up');
  copyBtn.addEventListener('click', function() {
    navigator.clipboard.writeText(content.textContent.slice(0,content.textContent.length-9)).then(function() {
    	leyuskc.innerText = "Copied!!"
    	leyuskc.style.opacity = '90%';
      setTimeout(function() {
        leyuskc.style.opacity='0%';
      }, 1500);
    }, function(err) {
    	leyuskc.innerText = "Copy Permission was denied Please copy manually-leyuskc"
      leyuskc.style.opacity = '100%';
      setTimeout(function() {
        leyuskc.style.opacity='0%';
      }, 1500);
    });
  });

function adjustFontSize() {
  const body = document.querySelector('blockquote');
  const pop = document.querySelector('#pop-up');
  const contentWidth = body.scrollWidth;
  const contentHeight = body.scrollHeight;
  const viewportWidth = window.innerWidth; 
  const fontSize = [30,18 * (viewportWidth / ((contentWidth+contentHeight)/2)),16].sort((a,b)=>a-b)[1];
  body.style.fontSize = `${Math.floor(fontSize)}px`;
  const contentWidth2 = pop.scrollWidth;
  const viewportWidth2 = window.innerWidth; 
  const fontSize2 = [16,14 * (viewportWidth2 / contentWidth2)].sort((a,b)=>a-b)[0];
  pop.style.fontSize = `${fontSize2}px`; 
  console.log([30,10 * (viewportWidth / contentWidth)])
}

window.addEventListener('load', adjustFontSize);
window.addEventListener('resize', adjustFontSize);
</script>

</body>
</html>
